(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[966],{3208:function(e,t,s){Promise.resolve().then(s.bind(s,9469)),Promise.resolve().then(s.bind(s,4210))},9469:function(e,t,s){"use strict";s.d(t,{default:function(){return u}});var n=s(7437),r=s(2265),a=s(4210);function u(){let{signup:e,loading:t}=(0,a.a)(),[s,u]=(0,r.useState)(""),[i,o]=(0,r.useState)(""),[l,c]=(0,r.useState)(""),[d,h]=(0,r.useState)(null);return(0,n.jsxs)("form",{className:"space-y-4",onSubmit:async t=>{if(t.preventDefault(),h(null),i.length<8){h("Password must be at least 8 characters");return}if(!l.trim()){h("Name is required");return}await e(s,i,l)||h("Sign up failed - email may already be in use")},children:[d&&(0,n.jsx)("p",{className:"text-red-600 text-sm",children:d}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm mb-1",children:"Name"}),(0,n.jsx)("input",{value:l,onChange:e=>c(e.target.value),className:"w-full border rounded p-2",required:!0})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm mb-1",children:"Email"}),(0,n.jsx)("input",{value:s,onChange:e=>u(e.target.value),className:"w-full border rounded p-2",type:"email",required:!0})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm mb-1",children:"Password"}),(0,n.jsx)("input",{value:i,onChange:e=>o(e.target.value),className:"w-full border rounded p-2",type:"password",required:!0})]}),(0,n.jsx)("button",{disabled:t,className:"w-full bg-primary-600 text-white py-2 rounded",children:t?"Creating...":"Create account"})]})}},4210:function(e,t,s){"use strict";s.d(t,{AuthProvider:function(){return i},a:function(){return o}});var n=s(7437),r=s(2265),a=s(2954);let u=(0,r.createContext)(void 0);function i(e){let{children:t}=e,[s,i]=(0,r.useState)(null),[o,l]=(0,r.useState)(!1);async function c(e,t){l(!0);try{let{data:s}=await a.h.client.post("/auth/login",{email:e,password:t});return a.h.setToken(s.accessToken),i(s.user),sessionStorage.setItem("auth",JSON.stringify({accessToken:s.accessToken,user:s.user})),window.location.href="/dashboard",!0}catch(e){return!1}finally{l(!1)}}async function d(e,t,s){l(!0);try{let{data:n}=await a.h.client.post("/auth/signup",{email:e,password:t,name:s});return a.h.setToken(n.accessToken),i(n.user),sessionStorage.setItem("auth",JSON.stringify({accessToken:n.accessToken,user:n.user})),window.location.href="/dashboard",!0}catch(e){return!1}finally{l(!1)}}return(0,r.useEffect)(()=>{{let e=sessionStorage.getItem("auth");if(e){let t=JSON.parse(e);a.h.setToken(t.accessToken),i(t.user)}}},[]),(0,n.jsx)(u.Provider,{value:{user:s,loading:o,login:c,signup:d,logout:function(){sessionStorage.removeItem("auth"),window.location.href="/",a.h.clearToken(),i(null)}},children:t})}function o(){let e=(0,r.useContext)(u);if(!e)throw Error("useAuth must be used within AuthProvider");return e}},2954:function(e,t,s){"use strict";s.d(t,{h:function(){return u}});var n=s(3464);let r=s(9792).env.NEXT_PUBLIC_API_URL||"http://localhost:3000/api";class a{setToken(e){this.client.defaults.headers.common.Authorization="Bearer ".concat(e)}clearToken(){delete this.client.defaults.headers.common.Authorization}constructor(){this.client=n.Z.create({baseURL:r})}}let u=new a}},function(e){e.O(0,[464,971,117,744],function(){return e(e.s=3208)}),_N_E=e.O()}]);