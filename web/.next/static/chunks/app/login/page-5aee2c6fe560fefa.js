(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{4059:function(e,t,n){Promise.resolve().then(n.bind(n,5737)),Promise.resolve().then(n.bind(n,4210))},5737:function(e,t,n){"use strict";n.d(t,{default:function(){return o}});var s=n(7437),r=n(2265),a=n(4210);function o(){let{login:e,loading:t}=(0,a.a)(),[n,o]=(0,r.useState)(""),[i,u]=(0,r.useState)(""),[l,c]=(0,r.useState)(null);return(0,s.jsxs)("form",{className:"space-y-4",onSubmit:async t=>{t.preventDefault(),c(null),await e(n,i)||c("Invalid email or password")},children:[l&&(0,s.jsx)("p",{className:"text-red-600 text-sm",children:l}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm mb-1",children:"Email"}),(0,s.jsx)("input",{value:n,onChange:e=>o(e.target.value),className:"w-full border rounded p-2",type:"email",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm mb-1",children:"Password"}),(0,s.jsx)("input",{value:i,onChange:e=>u(e.target.value),className:"w-full border rounded p-2",type:"password",required:!0})]}),(0,s.jsx)("button",{disabled:t,className:"w-full bg-primary-600 text-white py-2 rounded",children:t?"Signing in...":"Login"})]})}},4210:function(e,t,n){"use strict";n.d(t,{AuthProvider:function(){return i},a:function(){return u}});var s=n(7437),r=n(2265),a=n(2954);let o=(0,r.createContext)(void 0);function i(e){let{children:t}=e,[n,i]=(0,r.useState)(null),[u,l]=(0,r.useState)(!1);async function c(e,t){l(!0);try{let{data:n}=await a.h.client.post("/auth/login",{email:e,password:t});return a.h.setToken(n.accessToken),i(n.user),sessionStorage.setItem("auth",JSON.stringify({accessToken:n.accessToken,user:n.user})),window.location.href="/dashboard",!0}catch(e){return!1}finally{l(!1)}}async function d(e,t,n){l(!0);try{let{data:s}=await a.h.client.post("/auth/signup",{email:e,password:t,name:n});return a.h.setToken(s.accessToken),i(s.user),sessionStorage.setItem("auth",JSON.stringify({accessToken:s.accessToken,user:s.user})),window.location.href="/dashboard",!0}catch(e){return!1}finally{l(!1)}}return(0,r.useEffect)(()=>{{let e=sessionStorage.getItem("auth");if(e){let t=JSON.parse(e);a.h.setToken(t.accessToken),i(t.user)}}},[]),(0,s.jsx)(o.Provider,{value:{user:n,loading:u,login:c,signup:d,logout:function(){sessionStorage.removeItem("auth"),window.location.href="/",a.h.clearToken(),i(null)}},children:t})}function u(){let e=(0,r.useContext)(o);if(!e)throw Error("useAuth must be used within AuthProvider");return e}},2954:function(e,t,n){"use strict";n.d(t,{h:function(){return o}});var s=n(3464);let r=n(9792).env.NEXT_PUBLIC_API_URL||"http://localhost:3000/api";class a{setToken(e){this.client.defaults.headers.common.Authorization="Bearer ".concat(e)}clearToken(){delete this.client.defaults.headers.common.Authorization}constructor(){this.client=s.Z.create({baseURL:r})}}let o=new a}},function(e){e.O(0,[464,971,117,744],function(){return e(e.s=4059)}),_N_E=e.O()}]);