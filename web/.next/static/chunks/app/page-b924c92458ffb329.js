(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{2979:function(e,t,n){Promise.resolve().then(n.bind(n,7340))},7340:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var s=n(7437),r=n(7648),o=n(4210),i=n(2265);function c(){let{user:e}=(0,o.a)();return(0,i.useEffect)(()=>{e&&(window.location.href="/dashboard")},[e]),(0,s.jsx)("main",{className:"flex h-full items-center justify-center p-6",children:(0,s.jsxs)("div",{className:"max-w-md w-full text-center space-y-6",children:[(0,s.jsx)("h1",{className:"text-3xl font-semibold",children:"Welcome to GDrive Clone"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Sign in to access your drive."}),(0,s.jsxs)("div",{className:"flex gap-3 justify-center",children:[(0,s.jsx)(r.default,{href:"/login",className:"px-4 py-2 bg-primary-600 text-white rounded",children:"Login"}),(0,s.jsx)(r.default,{href:"/signup",className:"px-4 py-2 border rounded",children:"Sign up"})]})]})})}function a(){return(0,s.jsx)(o.AuthProvider,{children:(0,s.jsx)(c,{})})}},4210:function(e,t,n){"use strict";n.d(t,{AuthProvider:function(){return c},a:function(){return a}});var s=n(7437),r=n(2265),o=n(2954);let i=(0,r.createContext)(void 0);function c(e){let{children:t}=e,[n,c]=(0,r.useState)(null),[a,u]=(0,r.useState)(!1);async function l(e,t){u(!0);try{let{data:n}=await o.h.client.post("/auth/login",{email:e,password:t});return o.h.setToken(n.accessToken),c(n.user),sessionStorage.setItem("auth",JSON.stringify({accessToken:n.accessToken,user:n.user})),window.location.href="/dashboard",!0}catch(e){return!1}finally{u(!1)}}async function h(e,t,n){u(!0);try{let{data:s}=await o.h.client.post("/auth/signup",{email:e,password:t,name:n});return o.h.setToken(s.accessToken),c(s.user),sessionStorage.setItem("auth",JSON.stringify({accessToken:s.accessToken,user:s.user})),window.location.href="/dashboard",!0}catch(e){return!1}finally{u(!1)}}return(0,r.useEffect)(()=>{{let e=sessionStorage.getItem("auth");if(e){let t=JSON.parse(e);o.h.setToken(t.accessToken),c(t.user)}}},[]),(0,s.jsx)(i.Provider,{value:{user:n,loading:a,login:l,signup:h,logout:function(){sessionStorage.removeItem("auth"),window.location.href="/",o.h.clearToken(),c(null)}},children:t})}function a(){let e=(0,r.useContext)(i);if(!e)throw Error("useAuth must be used within AuthProvider");return e}},2954:function(e,t,n){"use strict";n.d(t,{h:function(){return i}});var s=n(3464);let r=n(9792).env.NEXT_PUBLIC_API_URL||"http://localhost:3000/api";class o{setToken(e){this.client.defaults.headers.common.Authorization="Bearer ".concat(e)}clearToken(){delete this.client.defaults.headers.common.Authorization}constructor(){this.client=s.Z.create({baseURL:r})}}let i=new o}},function(e){e.O(0,[464,648,971,117,744],function(){return e(e.s=2979)}),_N_E=e.O()}]);